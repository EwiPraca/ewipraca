(function(n){n.fn.swipe=function(t){if(!this)return!1;var i={fingers:1,threshold:75,timeThreshold:500,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto"},e="left",s="right",h="up",c="down",a="none",v="horizontal",y="vertical",k="auto",d="start",p="move",o="end",f="cancel",u="ontouchstart"in window,g=u?"touchstart":"mousedown",w=u?"touchmove":"mousemove",b=u?"touchend":"mouseup",nt="touchcancel",r="start",l;return t.allowPageScroll==undefined&&(t.swipe!=undefined||t.swipeStatus!=undefined)&&(t.allowPageScroll=a),t&&n.extend(i,t),this.each(function(){function at(n){var f=u?n.touches[0]:n,e;r=d;u&&(ft=n.touches.length);distance=0;direction=null;ft!=i.fingers&&u?it(n):(tt.x=t.x=f.pageX,tt.y=t.y=f.pageY,i.swipeStatus&&rt(n,r),e=new Date,l=e.getTime());et.addEventListener(w,st,!1);et.addEventListener(b,ht,!1)}function st(n){var e;if(r!=o&&r!=f)if(e=u?n.touches[0]:n,t.x=e.pageX,t.y=e.pageY,direction=lt(),u&&(ft=n.touches.length),r=p,vt(n,direction),ft!=i.fingers&&u)r=f,rt(n,r),it(n);else if(distance=ct(),i.swipeStatus&&rt(n,r,direction,distance),!i.triggerOnTouchEnd){var s=new Date,h=s.getTime(),c=h-l;distance>=i.threshold&&c<=i.timeThreshold&&(r=o,rt(n,r),it(n))}}function ht(n){if(n.preventDefault(),distance=ct(),direction=lt(),i.triggerOnTouchEnd)if(r=o,ft!=i.fingers&&u||t.x==0)r=f,rt(n,r),it(n);else{var e=new Date,s=e.getTime(),h=s-l;distance>=i.threshold&&h<=i.timeThreshold?(rt(n,r),it(n)):(r=f,rt(n,r),it(n))}else r==p&&(r=f,rt(n,r),it(n));et.removeEventListener(w,st,!1);et.removeEventListener(b,ht,!1)}function it(){ft=0;tt.x=0;tt.y=0;t.x=0;t.y=0;ot.x=0;ot.y=0}function rt(n,t){if(i.swipeStatus&&i.swipeStatus.call(ut,n,t,direction||null,distance||0),t==f&&i.click&&(ft==1||!u)&&(isNaN(distance)||distance==0)&&i.click.call(ut,n,n.target),t==o){i.swipe&&i.swipe.call(ut,n,direction,distance);switch(direction){case e:i.swipeLeft&&i.swipeLeft.call(ut,n,direction,distance);break;case s:i.swipeRight&&i.swipeRight.call(ut,n,direction,distance);break;case h:i.swipeUp&&i.swipeUp.call(ut,n,direction,distance);break;case c:i.swipeDown&&i.swipeDown.call(ut,n,direction,distance)}}}function vt(n,t){if(i.allowPageScroll==a)n.preventDefault();else{var r=i.allowPageScroll==k;switch(t){case e:(i.swipeLeft&&r||!r&&i.allowPageScroll!=v)&&n.preventDefault();break;case s:(i.swipeRight&&r||!r&&i.allowPageScroll!=v)&&n.preventDefault();break;case h:(i.swipeUp&&r||!r&&i.allowPageScroll!=y)&&n.preventDefault();break;case c:(i.swipeDown&&r||!r&&i.allowPageScroll!=y)&&n.preventDefault()}}}function ct(){return Math.round(Math.sqrt(Math.pow(t.x-tt.x,2)+Math.pow(t.y-tt.y,2)))}function yt(){var i=tt.x-t.x,r=t.y-tt.y,u=Math.atan2(r,i),n=Math.round(u*180/Math.PI);return n<0&&(n=360-Math.abs(n)),n}function lt(){var n=yt();return n<=45&&n>=0?e:n<=360&&n>=315?e:n>=135&&n<=225?s:n>45&&n<135?c:h}var et=this,ut=n(this),ft=0,tt={x:0,y:0},t={x:0,y:0},ot={x:0,y:0};try{this.addEventListener(g,at,!1);this.addEventListener(nt,it)}catch(pt){}})}})(jQuery);